<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>Solar Theme</title>
  <meta name="viewport" content="width=device-width">

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="/assets/css/style.css" rel="stylesheet" />
  <link href="/assets/css/colors-dark.css" rel="stylesheet" />

</head>

<body>



  <header id="header">
    <h1><a href="/">matt delhey</a></h1>
    <p>man is spirit. but what is spirit?</p>
  </header>



  <div id="page">



    <div id="sidebar">
      <nav>
        <ul>
          <li><a href="/">home</a></li>
	  <li><a href="/about">about</a></li>
          <li><a href="/projects">projects</a></li>
          <li><a href="/archives">archive</a></li>
	  <hr />
	  <li><a href="http://github.com/mattdelhey">github</a></li>
	  <li><a href="http://facebook.com/mattdelhey">facebook</a></li>
          <li><a href="http://twitter.com/mattdelhey">twitter</a></li>
	  <li><a href="http://linkedin.com/mattdelhey">linkedin</a></li>
        </ul>
      </nav>
    </div>



    <div id="content">
      

	<article class="post">

		
			<h1><a href="/2013/08/11/hidden-markov-models/">Simulating Hidden Markov Chains using R</a></h1>
		

		<div class="post-content"><p>Ever wanted to explore Hidden Markov Chains? It&#8217;s extraordinarily easy using some of R&#8217;s packages. Here I&#8217;m going to run through a quick example of modeling HMM&#8217;s with the Viterbi algorithm and Posterior probabilities on a simulation using the <strong>HMM</strong> package, with a focus on computation and visualization rather than mathematics (that&#8217;s all on <a href='http://en.wikipedia.org/wiki/Hidden_Markov_model'>Wikipedia</a> anyways!)</p>

<h3 id='scenario'>Scenario</h3>

<p>Consider a casino which uses a fair die most of the time, but occasionally they switch to a loaded die. The loaded die has probability 0.5 of a six and probability 0.1 for the numbers one to five. Assume that the casino switches from a fair die to a loaded die with probability 0.05 before each roll, and the probability of switching back is 0.1.</p>

<p>Here we can see that we&#8217;re dealing with a simple, two-state HMM with the following transition probability and emission probability matrices:</p>

<p>TPM = <span>.95 .05</span></p>

<pre><code>     [.10  .90]
        1     2    3     4     5     6</code></pre>

<p>EPM = F <span>1/6 1/6 1/6 1/6 1/6 1/6</span></p>

<pre><code>   L [1/10  1/10  1/10  1/10  1/10  1/2]</code></pre>

<p>I also took the time to create the following &#8220;graphic&#8221; of the process:</p>

<p><img alt='hidden-markov-model' src='/images/hmm.png' /></p>

<p>Not pretty, but it gets the job done in terms of aiding our understanding of the process.</p>

<h3 id='simulation'>Simulation</h3>

<p>Let&#8217;s simulate 500 of such dice rolls. To make things easier, I used the <strong>dice</strong> function from the <strong>TeachingDemos</strong> package, which supports loaded dice tosses from our EPM matrix. Here&#8217;s how I ran my simulations:</p>
<div class='highlight'><pre><code class='r'><span class='c1'>### Simulation &amp; Modeling of Hidden Markov Model (HMM)</span>
library<span class='p'>(</span>TeachingDemos<span class='p'>)</span>
library<span class='p'>(</span>HMM<span class='p'>)</span>
library<span class='p'>(</span>ggplot2<span class='p'>)</span>
set.seed<span class='p'>(</span><span class='m'>1</span><span class='p'>)</span>

<span class='c1'>### Define our variables</span>
TPM <span class='o'>&lt;-</span> matrix<span class='p'>(</span>c<span class='p'>(</span><span class='m'>.95</span><span class='p'>,</span> <span class='m'>.05</span><span class='p'>,</span> 
                <span class='m'>.1</span><span class='p'>,</span> <span class='m'>.9</span><span class='p'>),</span> <span class='m'>2</span><span class='p'>,</span> byrow <span class='o'>=</span> <span class='kc'>TRUE</span><span class='p'>)</span>
EPM <span class='o'>&lt;-</span> matrix<span class='p'>(</span>c<span class='p'>(</span><span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>6</span><span class='p'>,</span>
                <span class='m'>1</span><span class='o'>/</span><span class='m'>10</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>10</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>10</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>10</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>10</span><span class='p'>,</span> <span class='m'>1</span><span class='o'>/</span><span class='m'>2</span><span class='p'>),</span> <span class='m'>2</span><span class='p'>,</span> byrow <span class='o'>=</span> <span class='kc'>TRUE</span><span class='p'>)</span>
simulations <span class='o'>&lt;-</span> <span class='m'>500</span>

<span class='c1'>### Create a dataframe to hold our results</span>
dice <span class='o'>&lt;-</span> rep<span class='p'>(</span><span class='kc'>NA</span><span class='p'>,</span> simulations<span class='p'>)</span>
number <span class='o'>&lt;-</span> rep.int<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span> simulations<span class='p'>)</span>
results <span class='o'>&lt;-</span> data.frame<span class='p'>(</span>dice<span class='p'>,</span> number<span class='p'>)</span>

<span class='c1'>### Simulate</span>
<span class='c1'># Assume we start with a fair dice</span>
state <span class='o'>&lt;-</span> <span class='s'>&quot;FAIR&quot;</span>
<span class='kr'>for</span> <span class='p'>(</span>i <span class='kr'>in</span> <span class='m'>1</span><span class='o'>:</span>simulations<span class='p'>)</span> <span class='p'>{</span>
  <span class='kr'>if</span> <span class='p'>(</span>state <span class='o'>==</span> <span class='s'>&quot;FAIR&quot;</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'># Check to see if we&#39;re staying with a FAIR dice</span>
    p <span class='o'>&lt;-</span> runif<span class='p'>(</span><span class='m'>1</span><span class='p'>)</span>
    <span class='kr'>if</span> <span class='p'>(</span>p <span class='o'>&lt;=</span> TPM<span class='p'>[</span><span class='m'>1</span><span class='p'>,</span><span class='m'>2</span><span class='p'>])</span> <span class='p'>{</span>
      <span class='c1'># If not, roll loaded dice</span>
      roll <span class='o'>&lt;-</span> dice<span class='p'>(</span>rolls <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> ndice <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> sides <span class='o'>=</span> <span class='m'>6</span><span class='p'>,</span> load <span class='o'>=</span> EPM<span class='p'>[</span><span class='m'>2</span><span class='p'>,])[[</span><span class='m'>1</span><span class='p'>]]</span>
      <span class='c1'># Remember new state</span>
      state <span class='o'>&lt;-</span> <span class='s'>&quot;LOADED&quot;</span>
    <span class='p'>}</span>
    <span class='kr'>else</span> <span class='p'>{</span>
      <span class='c1'># Roll fair dice</span>
      roll <span class='o'>&lt;-</span> dice<span class='p'>(</span>rolls <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> ndice <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> sides <span class='o'>=</span> <span class='m'>6</span><span class='p'>,</span> load <span class='o'>=</span> EPM<span class='p'>[</span><span class='m'>1</span><span class='p'>,])[[</span><span class='m'>1</span><span class='p'>]]</span>
      <span class='c1'># Remember old state</span>
      state <span class='o'>&lt;-</span> <span class='s'>&quot;FAIR&quot;</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
  <span class='kr'>if</span> <span class='p'>(</span>state <span class='o'>==</span> <span class='s'>&quot;LOADED&quot;</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'># Check to see if we&#39;re staying with a LOADED dice</span>
    p <span class='o'>&lt;-</span> runif<span class='p'>(</span><span class='m'>1</span><span class='p'>)</span>
    <span class='kr'>if</span> <span class='p'>(</span>p <span class='o'>&lt;</span> TPM<span class='p'>[</span><span class='m'>2</span><span class='p'>,</span><span class='m'>1</span><span class='p'>])</span> <span class='p'>{</span>
      <span class='c1'># If not, roll fair dice</span>
      roll <span class='o'>&lt;-</span> dice<span class='p'>(</span>rolls <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> ndice <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> sides <span class='o'>=</span> <span class='m'>6</span><span class='p'>,</span> load <span class='o'>=</span> EPM<span class='p'>[</span><span class='m'>1</span><span class='p'>,])[[</span><span class='m'>1</span><span class='p'>]]</span>
      <span class='c1'># Remember new state</span>
      state <span class='o'>&lt;-</span> <span class='s'>&quot;FAIR&quot;</span>
    <span class='p'>}</span>
    <span class='kr'>else</span> <span class='p'>{</span>
      <span class='c1'># Roll loaded dice</span>
      roll <span class='o'>&lt;-</span> dice<span class='p'>(</span>rolls <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> ndice <span class='o'>=</span> <span class='m'>1</span><span class='p'>,</span> sides <span class='o'>=</span> <span class='m'>6</span><span class='p'>,</span> load <span class='o'>=</span> EPM<span class='p'>[</span><span class='m'>2</span><span class='p'>,])[[</span><span class='m'>1</span><span class='p'>]]</span>
      <span class='c1'># Remember old state</span>
      state <span class='o'>&lt;-</span> <span class='s'>&quot;LOADED&quot;</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
  <span class='c1'># Save dice roll and state</span>
  results<span class='p'>[</span>i<span class='p'>,</span> <span class='m'>1</span><span class='p'>]</span> <span class='o'>&lt;-</span> state
  results<span class='p'>[</span>i<span class='p'>,</span> <span class='m'>2</span><span class='p'>]</span> <span class='o'>&lt;-</span> roll
<span class='p'>}</span>
</code></pre></div>
<h3 id='modeling'>Modeling</h3>

<p>Now that we have a sequence of dice rolls from known states, let&#8217;s see how well we can predict the states from the sequence. Here I&#8217;m going to focus on two basic and simple methodologies: (1) the Viterbi algorithm and (2) posterior probabilities. The mathematics for both of these methods can be easily found via Google if you&#8217;re at all curious. Luckily for the lazy, the <strong>HMM</strong> package contains functions for computing both of these predictions very easily. Here&#8217;s how I did it:</p>
<div class='highlight'><pre><code class='r'><span class='c1'>### Modeling</span>
<span class='c1'># Create hmm using our TPM/EPM</span>
hmm <span class='o'>&lt;-</span> initHMM<span class='p'>(</span>c<span class='p'>(</span><span class='s'>&quot;FAIR&quot;</span><span class='p'>,</span> <span class='s'>&quot;LOADED&quot;</span><span class='p'>),</span> c<span class='p'>(</span><span class='m'>1</span><span class='p'>,</span> <span class='m'>2</span><span class='p'>,</span> <span class='m'>3</span><span class='p'>,</span> <span class='m'>4</span><span class='p'>,</span> <span class='m'>5</span><span class='p'>,</span> <span class='m'>6</span><span class='p'>),</span>
               transProbs <span class='o'>=</span> TPM<span class='p'>,</span> emissionProbs <span class='o'>=</span> EPM<span class='p'>)</span>
<span class='c1'># Pull in results from the simulation</span>
obs <span class='o'>&lt;-</span> results<span class='p'>[,</span> <span class='m'>2</span><span class='p'>]</span>
<span class='c1'># Save Viterbi/Posterior predictions as a new column</span>
results<span class='o'>$</span>viterbi <span class='o'>&lt;-</span> viterbi<span class='p'>(</span>hmm<span class='p'>,</span> obs<span class='p'>)</span>
results<span class='o'>$</span>posterior <span class='o'>&lt;-</span> posterior<span class='p'>(</span>hmm<span class='p'>,</span> obs<span class='p'>)[</span><span class='m'>1</span><span class='p'>,</span> <span class='p'>]</span>
results<span class='o'>$</span>posterior<span class='p'>[</span>results<span class='o'>$</span>posterior <span class='o'>&gt;=</span> <span class='m'>0.5</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;FAIR&quot;</span>
results<span class='o'>$</span>posterior<span class='p'>[</span>results<span class='o'>$</span>posterior <span class='o'>&lt;</span> <span class='m'>0.5</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;LOADED&quot;</span>
<span class='c1'># Check out results</span>
table<span class='p'>(</span>results<span class='o'>$</span>dice<span class='p'>)</span>
table<span class='p'>(</span>results<span class='o'>$</span>viterbi<span class='p'>)</span>
table<span class='p'>(</span>results<span class='o'>$</span>posterior<span class='p'>)</span>
</code></pre></div>
<p>Our simulation resulted in 2012 fair dice rolls and 988 loaded dice rolls, with a model accuracy of 90.97% for the Viterbi algorithm and 95.43% for posterior probabilities.</p>

<h3 id='visualization'>Visualization</h3>

<p>Accuracy alone doesn&#8217;t tell the full story. Let&#8217;s visualize our sequence predictions to see how they compare to the true sequence. In the following plot, the true sequence is given at the top, and the two following sequences are our predictions. The red points in the prediction plots represent wrong predictions.</p>
<div class='highlight'><pre><code class='r'><span class='c1'>### Plot predictions with true sequence</span>
p1 <span class='o'>&lt;-</span> ggplot<span class='p'>(</span>aes<span class='p'>(</span>x <span class='o'>=</span> seq_along<span class='p'>(</span>dice<span class='p'>)),</span> data <span class='o'>=</span> results<span class='p'>)</span> <span class='o'>+</span>
      geom_point<span class='p'>(</span>aes<span class='p'>(</span>y <span class='o'>=</span> dice<span class='p'>))</span> <span class='o'>+</span> 
      ylab<span class='p'>(</span><span class='s'>&quot;State&quot;</span><span class='p'>)</span> <span class='o'>+</span> xlab<span class='p'>(</span><span class='s'>&quot;Dice Roll (In Sequence)&quot;</span><span class='p'>)</span> <span class='o'>+</span> ylab<span class='p'>(</span><span class='s'>&quot;State&quot;</span><span class='p'>)</span> <span class='o'>+</span>
      ggtitle<span class='p'>(</span><span class='s'>&quot;Actual Results&quot;</span><span class='p'>)</span>

p2 <span class='o'>&lt;-</span> ggplot<span class='p'>(</span>aes<span class='p'>(</span>x <span class='o'>=</span> seq_along<span class='p'>(</span>dice<span class='p'>)),</span> data <span class='o'>=</span> results<span class='p'>)</span> <span class='o'>+</span>
        geom_point<span class='p'>(</span>aes<span class='p'>(</span>y <span class='o'>=</span> dice<span class='p'>),</span> color <span class='o'>=</span> <span class='s'>&quot;#F8766D&quot;</span><span class='p'>)</span> <span class='o'>+</span> 
        geom_point<span class='p'>(</span>aes<span class='p'>(</span>y <span class='o'>=</span> viterbi<span class='p'>),</span> color <span class='o'>=</span> <span class='s'>&quot;#00BFC4&quot;</span><span class='p'>)</span> <span class='o'>+</span>
        xlab<span class='p'>(</span><span class='s'>&quot;Dice Roll (In Sequence)&quot;</span><span class='p'>)</span> <span class='o'>+</span> ylab<span class='p'>(</span><span class='s'>&quot;State&quot;</span><span class='p'>)</span> <span class='o'>+</span>
        ggtitle<span class='p'>(</span><span class='s'>&quot;Viterbi Predictions&quot;</span><span class='p'>)</span>

p3 <span class='o'>&lt;-</span> ggplot<span class='p'>(</span>aes<span class='p'>(</span>x <span class='o'>=</span> seq_along<span class='p'>(</span>dice<span class='p'>)),</span> data <span class='o'>=</span> results<span class='p'>)</span> <span class='o'>+</span>
      geom_point<span class='p'>(</span>aes<span class='p'>(</span>y <span class='o'>=</span> dice<span class='p'>),</span> color <span class='o'>=</span> <span class='s'>&quot;#F8766D&quot;</span><span class='p'>)</span> <span class='o'>+</span> 
      geom_point<span class='p'>(</span>aes<span class='p'>(</span>y <span class='o'>=</span> posterior<span class='p'>),</span> color <span class='o'>=</span> <span class='s'>&quot;#00BFC4&quot;</span><span class='p'>)</span> <span class='o'>+</span>
      xlab<span class='p'>(</span><span class='s'>&quot;Dice Roll (in sequence)&quot;</span><span class='p'>)</span> <span class='o'>+</span> ylab<span class='p'>(</span><span class='s'>&quot;State&quot;</span><span class='p'>)</span> <span class='o'>+</span>
      ggtitle<span class='p'>(</span><span class='s'>&quot;Posterior Predictions&quot;</span><span class='p'>)</span>

grid.arrange<span class='p'>(</span>p1<span class='p'>,</span> p2<span class='p'>,</span> p3<span class='p'>,</span> ncol <span class='o'>=</span> <span class='m'>1</span><span class='p'>)</span>
</code></pre></div>
<p><img alt='hmm-vis' src='/images/hmm_vis.png' /></p>

<p>Both prediction methods seem to model the known states pretty well, at least capturing the major trends. Finally, we can also take a peek at our posterior probabilities.</p>
<div class='highlight'><pre><code class='r'><span class='c1'>### Posterior probabilities</span>
<span class='c1'># Calculate Posterior probabilities for dice, save as new column</span>
results<span class='o'>$</span>posterior_probabilities <span class='o'>&lt;-</span> posterior<span class='p'>(</span>hmm<span class='p'>,</span> obs<span class='p'>)[</span><span class='m'>1</span><span class='p'>,</span> <span class='p'>]</span>
rects <span class='o'>&lt;-</span> data.frame<span class='p'>(</span>ymin <span class='o'>=</span> c<span class='p'>(</span><span class='m'>0</span><span class='p'>,</span> <span class='m'>0.5</span><span class='p'>),</span> ymax <span class='o'>=</span> c<span class='p'>(</span><span class='m'>0.5</span><span class='p'>,</span> <span class='m'>1</span><span class='p'>),</span> Prediction <span class='o'>=</span> c<span class='p'>(</span><span class='s'>&quot;Tails&quot;</span><span class='p'>,</span> <span class='s'>&quot;Heads&quot;</span><span class='p'>))</span>
<span class='c1'># Plot posterior probabilities</span>
ggplot<span class='p'>()</span> <span class='o'>+</span> 
  geom_rect<span class='p'>(</span>data <span class='o'>=</span> rects<span class='p'>,</span> aes<span class='p'>(</span>xmin <span class='o'>=</span> <span class='o'>-</span><span class='kc'>Inf</span><span class='p'>,</span> xmax <span class='o'>=</span> <span class='kc'>Inf</span><span class='p'>,</span> ymin <span class='o'>=</span> ymin<span class='p'>,</span> ymax <span class='o'>=</span> ymax<span class='p'>,</span> fill <span class='o'>=</span> Prediction<span class='p'>),</span> alpha <span class='o'>=</span> <span class='m'>0.2</span><span class='p'>)</span> <span class='o'>+</span>
  geom_line<span class='p'>(</span>data <span class='o'>=</span> results<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> seq_along<span class='p'>(</span>dice<span class='p'>),</span> y <span class='o'>=</span> posterior_probabilities<span class='p'>),</span> color <span class='o'>=</span> <span class='s'>&quot;grey&quot;</span><span class='p'>,</span> size <span class='o'>=</span> <span class='m'>0.7</span><span class='p'>)</span> <span class='o'>+</span>
  geom_point<span class='p'>(</span>data <span class='o'>=</span> results<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> seq_along<span class='p'>(</span>dice<span class='p'>),</span> y <span class='o'>=</span> posterior_probabilities<span class='p'>),</span> stat <span class='o'>=</span> <span class='s'>&quot;identity&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  ggtitle<span class='p'>(</span><span class='s'>&quot;Posterior Probabilities&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  xlab<span class='p'>(</span><span class='s'>&quot;Dice Roll (In Sequence)&quot;</span><span class='p'>)</span> <span class='o'>+</span> 
  ylab<span class='p'>(</span><span class='s'>&quot;Probability of Heads&quot;</span><span class='p'>)</span>
</code></pre></div>
<p><img alt='hmm_posterior' src='/images/hmm_posterior.png' /></p></div>

	</article>



	<article class="post">

		
			<h1><a href="/2013/07/15/a-more-concrete-derrida/">A (More) Concrete Derrida</a></h1>
		

		<div class="post-content"><p>I feel that Derrida gets a bad reputation as overly unapproachable among analytically-bent philosophy students that I&#8217;ve talked to. For various reason, his texts are often critiqued as being unnecessarily obtuse, perhaps, they say, to cover up the fact that he&#8217;s not saying much at all. I don&#8217;t want to say that this isn&#8217;t true, but as I finish up my reading of &#8220;The Gift of Death&#8221; I&#8217;ve come across various passages that have Derrida talking in a very concrete, vivid and pragmatic manner. In fact, these cases when Derrida takes his arguments to some of their specific instantiations end up being some of my favorite moments in his book. But after re-reading what I&#8217;ve written here, perhaps it&#8217;s not as concrete as I&#8217;d thought, so instead a <em>more</em> concrete Derrida. Here&#8217;s what I&#8217;m talking about:</p>

<blockquote>
<p>&#8220;In terms of the moral of morality, let us here insist upon what is too often forgotten by the moralizing moralists and good consciences who preach to us with assurance every morning and every week, in newspapers and magazines, on the radio and on television, about the sense of ethical or political responsibility. Philosophers who don&#8217;t write ethics are failing in their duty, one often hears, and the first duty of the philosopher is to think about ethics, to add a chapter on ethics to each of his or her books and, in order to do that, to come back to Kant as often as possible. What the knights of good conscience don&#8217;t realize, is that &#8220;the sacrifice of Isaac&#8221; illustrates&#8211;if that is the word in the case of such a nocturnal mystery&#8211;the most common and everyday experience of responsibility. The story is no doubt monstrous, outrageous, barely conceivable: a father is ready to put to death his beloved son, his irreplaceable loved one, and that because the Other, the great Other asks him or orders him without giving the slightest explanation.</p>
</blockquote>

<p>Here Derrida is speaking right after his conclusion asserting the connection between secrecy and responsibility as demonstrated in the Christian story of Isaac. He demonstrates that this isn&#8217;t an esoteric point by pointing out its inherent contradiction to the popular &#8216;moralists&#8217;. Those who are seemingly always calling for this or that kind of responsibility are perhaps in opposition to that which makes absolute responsibility possible all together, namely secrecy. And it&#8217;s not a theoretical dilemma. Derrida is saying that our everyday experience of responsibility doesn&#8217;t match up with &#8216;their&#8217; universalizing account of responsibility. If the moralists are to be believed, I think, then we are supposedly bound (&#8216;responsible&#8217;) to a vast array of people, jobs, countries, animals, things&#8230; But in everyday experience we are also bound to those things which are completely personal like family, faith, ourselves. &#8220;I cannot respond to the call, the request, the obligation, or even the love of another without sacrificing the other other, the other others&#8230; every one else is completely or wholly other.&#8221; So to heed the call of the moralists is to necessarily make a sacrifice. The expense is towards the important instantiations in our lives, which are ironically enough our most potent sources of responsibility.</p>

<p>Continuing the issue of the wholly other (every other):</p>

<blockquote>
<p>&#8220;Whether I want to or not, I can never justify the fact that I prefer or sacrifice any one (any other) to the other. I will always be secretive, held to secrecy in respect of this, for I have nothing to say about it. What binds me to singularities, to this one or that one, male or female, rather than that one or this one, remains finally unjustifiable (this is Abraham&#8217;s hyper-ethical sacrifice), as unjustifiable as the infinite sacrifice I make at each moment. These singularities represent others, a wholly other form of alterity: one other or some other persons, but also places, animals, languages. How would you ever justify the fact that you sacrifice all the cats in the world to the cat that you feed at home every morning for years, whereas other cats die of hunger at every instant? Not to mention other people? How would you justify your presence here speaking one particular language, rather than there speaking to others in another language? And yet we also do our duty by behaving thus. There is no language, no reason, no generality or mediation to justify this ultimate responsibility which leads me to absolute sacrifice.&#8221;</p>
</blockquote>

<p>I love the line here about cats. I don&#8217;t think this is a new thought regarding pets, but it&#8217;s well formulated. How do I justify picking one dog from the pet store over any of the others available? What about of all the dogs available in the world? All animals together? But the love I have for my dog isn&#8217;t bunk, it&#8217;s as real, important, and normative as anything else in my life. I think this is what Derrida is trying to say, that we can&#8217;t justify these important aspects of our lives in terms of absolute responsibility (e.g. in the fashion of the moralists). Paradoxically, a fully rationalized or public account of responsibility cannot meet the call of responsibility. And so I suppose this is what Derrida means when he goes on and on about absolute sacrifice, that it is the absolute sacrifice of such an account of responsibility, of generalizable singularity (ethics) in this sense.</p></div>

	</article>



	<article class="post">

		
			<h1><a href="/2013/02/01/reconstructing-minards-march/">Reconstructing Napoleon's Failed March to Russia</a></h1>
		

		<div class="post-content"><p><img alt='original_minard' src='/images/original_minard.jpg' /></p>

<p>Above is perhaps one the most famous statistical graphics ever created, found in nearly every history text-book (at least the ones I read&#8230;) that discusses Napoleon&#8217;s failed invasions of Russia in 1812. The graphic was originally created by <a href='http://en.wikipedia.org/wiki/Charles_Joseph_Minard'>Charles Joseph Minard</a>, a statistician ahead of his time.</p>

<p>The reason this graphic is so good is that it tells a story for the viewer allowing us to visualize the march. By following along the graphic, we get a real feel for just how bad Napoleon&#8217;s march must have been. My favorite observation is how the number of troops about halves every time the army crosses a river&#8211; something that must of been pretty treacherous in the freezing temperatures.</p>

<h3 id='representing_the_march_with_ggplot2'>Representing the march with ggplot2</h3>

<p>We want to represent the above graphic using ggplot2&#8217;s grammar of graphics. In order to do this, we need to determine the layers that we want to create, what data is required for each layer, and what geometries we need to represent the data like Minard. So let&#8217;s break down each variable utilized in Minard&#8217;s graphic and convert them to layers we can implement using ggplot2:</p>

<ul>
<li>Map of Russia, including names of cities. Created using the <em>map</em> package &amp; geom_polygon and a text file containing city names with location &amp; geom_text.</li>

<li>The number of troops. This is mapped to the size of the line using geom_path.</li>

<li>Direction of the army, represented by the tan/black colors and including information on the split and re-joining. Mapped using the color and lineend properties of geom_path.</li>

<li><strong>Missing:</strong> the temperature and dates of the troops as they made their way across Russia. This data could reasonably be added by superimposing geom_line and geom_point layers on the bottom of the plot.</li>

<li><strong>Also Missing:</strong> geographical information for the map of Russia, including Rivers, etc.</li>
</ul>

<p>Luckily, the data needed for the non-missing variables is all easily obtainable. The troop and city data is provided by Hadley Wickham on his <a href='http://stat405.had.co.nz/'>stat405 website</a> (from which I got this example) and the map data is available from the maps package.</p>

<h3 id='putting_it_all_in_r'>Putting it all in R</h3>

<p>The hard part is over. Here&#8217;s our graphic and how it&#8217;s implemented using our grammar of graphics and ggplot2. While it doesn&#8217;t look quite as good as Minard&#8217;s plot, we gain a lot of power by being able to create the graphic automatically as opposed to by hand &#8211; and it only took us a few minutes to create!</p>

<p><img alt='minard' src='/images/minard.png' /></p>
<div class='highlight'><pre><code class='r'>library<span class='p'>(</span>ggplot2<span class='p'>)</span>
library<span class='p'>(</span>maps<span class='p'>)</span>
 
troops <span class='o'>&lt;-</span> read.table<span class='p'>(</span><span class='s'>&quot;minard-troops.txt&quot;</span><span class='p'>,</span> header <span class='o'>=</span> <span class='k-Variable'>T</span><span class='p'>)</span>
cities <span class='o'>&lt;-</span> read.table<span class='p'>(</span><span class='s'>&quot;minard-cities.txt&quot;</span><span class='p'>,</span> header <span class='o'>=</span> <span class='k-Variable'>T</span><span class='p'>)</span>
russia <span class='o'>&lt;-</span> map_data<span class='p'>(</span><span class='s'>&quot;world&quot;</span><span class='p'>,</span> region <span class='o'>=</span> <span class='s'>&quot;USSR&quot;</span><span class='p'>)</span>
 
ggplot<span class='p'>(</span>troops<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>))</span> <span class='o'>+</span>
  geom_polygon<span class='p'>(</span>aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>,</span> group <span class='o'>=</span> group<span class='p'>),</span> data <span class='o'>=</span> russia<span class='p'>,</span> fill <span class='o'>=</span> <span class='s'>&quot;white&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  geom_path<span class='p'>(</span>aes<span class='p'>(</span>size <span class='o'>=</span> survivors<span class='p'>,</span> color <span class='o'>=</span> direction<span class='p'>,</span> group <span class='o'>=</span> group<span class='p'>),</span> lineend <span class='o'>=</span> <span class='s'>&quot;round&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  geom_text<span class='p'>(</span>aes<span class='p'>(</span>label <span class='o'>=</span> city<span class='p'>),</span> size <span class='o'>=</span> <span class='m'>3</span><span class='p'>,</span> data <span class='o'>=</span> cities<span class='p'>)</span> <span class='o'>+</span>
  xlab<span class='p'>(</span><span class='kc'>NULL</span><span class='p'>)</span> <span class='o'>+</span> ylab<span class='p'>(</span><span class='kc'>NULL</span><span class='p'>)</span> <span class='o'>+</span> coord_equal<span class='p'>(</span>xlim <span class='o'>=</span> c<span class='p'>(</span><span class='m'>23</span><span class='p'>,</span> <span class='m'>38</span><span class='p'>),</span> ylim <span class='o'>=</span> c<span class='p'>(</span><span class='m'>50</span><span class='p'>,</span> <span class='m'>60</span><span class='p'>))</span> <span class='o'>+</span>
  scale_colour_manual<span class='p'>(</span>values <span class='o'>=</span> c<span class='p'>(</span><span class='s'>&quot;bisque2&quot;</span><span class='p'>,</span><span class='s'>&quot;grey10&quot;</span><span class='p'>))</span>
</code></pre></div></div>

	</article>



	<article class="post">

		
			<h1><a href="/2013/01/13/ufo/">A Quick Look At UFO Reports Across the U.S.</a></h1>
		

		<div class="post-content"><p>Here&#8217;s quick bit of data visualization that utilizes ggplot&#8217;s fast and easy map-building abilities. Using the rather large <a href='http://www.nuforc.org/webreports.html'>National UFO Reporting Center Online Database</a> available on <a href='http://www.infochimps.com'>Infochimp&#8217;s</a> dataset search engine, we can create a simple map of the continental United States and get a feel for the distribution of UFO reports by state between the years 2000 to 2010.</p>

<p>In order to make valid cross-state comparisons, we also need to normalize the frequency of the reports by the population of each state. I accomplished this by importing U.S. census data, which contained population information for the years 2000 and 2011. I took the simple average of the two to create a rough population estimate for the decade. After a little bit of data cleaning I was able to create the following map with ggplot2:</p>

<p><img alt='ufo_map' src='/images/ufo.png' /></p>

<p>While this is certainly a simple graphic, we can begin to notice a pattern in the distribution of UFO reports! There appears to be three major regions of the United States that are receiving large numbers of reports. The most obvious and dense of these regions is the Northwest, which is traditionally known for being witness to some of the most unexplainable behavior in the United States (e.g. Sasquatch). We can also see a smaller region bellow in the Southwest, which might correlate to Area 51 phenomena. Finally, we see a third cluster of high-reporting states in the Northeast. Interestingly enough, we can notice that the South clearly reports the least amount of UFO&#8217;s. This graphic alone allows us to start exploring this data set for real insights.</p>

<p>One thing that needs to be explained is the non-descriptive legend. This number was calculated by dividing the total number of UFO reports in each state over the entire decade divided by the state&#8217;s population. Therefore we can interpret the number as saying the average number of UFO reports over the decade submitted per person in that state. For example, Washington has the highest distribution of UFO reports at 4e^(-4), which is about 0.0732626 for those of you keeping track at home. This means that, on average, about 7 out of every 100 Washington residents has reported a UFO sighting! Of course, this assumes a uniform distribution of UFO reports across state residents, which is clearly not the case. But this at least gives a better feel for what the legend in this graphic is communicating.</p>

<p>Finally, I have included the full R code used to load, clean, and visualize this data. Three data sets are used: the first (ufo_awesome.tsv) coming from the links above, and <a href='/assets/census.csv&quot;'>census.csv</a> plus <a href='/assets/states.csv'>states.csv</a> which are very small and thus available on this very site. This is a rather simple example that may be of use to someone just starting out with R so you shouldn&#8217;t have any difficulties running the code.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Goal: Create a heatmap of UFO reports across the USA from 2000 to 2010</span>
library<span class='p'>(</span>ggplot2<span class='p'>)</span>
library<span class='p'>(</span>lubridate<span class='p'>)</span>
library<span class='p'>(</span>stringr<span class='p'>)</span>
library<span class='p'>(</span>plyr<span class='p'>)</span>
library<span class='p'>(</span>maps<span class='p'>)</span>
library<span class='p'>(</span>mapproj<span class='p'>)</span>
 
<span class='c1'># Load the data set (source: infochimps). Tab-delim, no header</span>
ufo <span class='o'>&lt;-</span> read.delim<span class='p'>(</span><span class='s'>&quot;ufo_awesome.tsv&quot;</span><span class='p'>,</span> sep <span class='o'>=</span> <span class='s'>&quot;\t&quot;</span><span class='p'>,</span> 
         stringsAsFactors <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>,</span> header <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
 
<span class='c1'># Give names to each column in the data set</span>
names<span class='p'>(</span>ufo<span class='p'>)</span> <span class='o'>&lt;-</span> c<span class='p'>(</span><span class='s'>&quot;date_occurred&quot;</span><span class='p'>,</span> <span class='s'>&quot;date_reported&quot;</span><span class='p'>,</span> 
                <span class='s'>&quot;location&quot;</span><span class='p'>,</span> <span class='s'>&quot;short_description&quot;</span><span class='p'>,</span>
                <span class='s'>&quot;duration&quot;</span><span class='p'>,</span> <span class='s'>&quot;long_description&quot;</span><span class='p'>)</span>
 
<span class='c1'># Some issues with our dates. Let&#39;s just take only the rows with good dates.</span>
ufo <span class='o'>&lt;-</span> ufo<span class='p'>[</span>nchar<span class='p'>(</span>ufo<span class='o'>$</span>date_occurred<span class='p'>)</span> <span class='o'>==</span> <span class='m'>8</span> <span class='o'>&amp;</span> nchar<span class='p'>(</span>ufo<span class='o'>$</span>date_reported<span class='p'>)</span> <span class='o'>==</span> <span class='m'>8</span><span class='p'>,</span> <span class='p'>]</span>
 
<span class='c1'># Turn date chracters into actual dates</span>
ufo<span class='o'>$</span>date_occurred <span class='o'>&lt;-</span> ymd<span class='p'>(</span>ufo<span class='o'>$</span>date_occurred<span class='p'>)</span>
ufo<span class='o'>$</span>date_reported <span class='o'>&lt;-</span> ymd<span class='p'>(</span>ufo<span class='o'>$</span>date_reported<span class='p'>)</span>
 
<span class='c1'># Only interested in reports from years 2000-2010</span>
ufo <span class='o'>&lt;-</span> subset<span class='p'>(</span>ufo<span class='p'>,</span> year<span class='p'>(</span>date_reported<span class='p'>)</span> <span class='o'>&gt;=</span> <span class='m'>2000</span><span class='p'>)</span>
qplot<span class='p'>(</span>ufo<span class='o'>$</span>date_reported<span class='p'>,</span> data <span class='o'>=</span> ufo<span class='p'>)</span>
<span class='c1'># Sizeable number of reports across all years</span>
 
<span class='c1'># Extract states of UFO reports into a new variable</span>
ufo<span class='o'>$</span>state <span class='o'>&lt;-</span> str_extract<span class='p'>(</span>ufo<span class='o'>$</span>location<span class='p'>,</span> <span class='s'>&quot;[,A-Z]{2}&quot;</span><span class='p'>)</span>
<span class='c1'># Let&#39;s check to see the number of NA vlues from our extraction</span>
length<span class='p'>(</span>which<span class='p'>(</span>is.na<span class='p'>(</span>str_extract<span class='p'>(</span>ufo<span class='o'>$</span>location<span class='p'>,</span> <span class='s'>&quot;[,A-Z]{2}&quot;</span><span class='p'>))))</span>
<span class='c1'># Most of these NA&#39;s are caused by international reports</span>
 
<span class='c1'># Remove the reports with NA&#39;s </span>
ufo <span class='o'>&lt;-</span> subset<span class='p'>(</span>ufo<span class='p'>,</span> <span class='o'>!</span>is.na<span class='p'>(</span>state<span class='p'>))</span>
<span class='c1'># We need to clean up some of the states!</span>
<span class='c1'># Only take real state abbrevations</span>
ufo_state <span class='o'>&lt;-</span> ufo<span class='p'>[</span>ufo<span class='o'>$</span>state <span class='o'>%in%</span> c<span class='p'>(</span><span class='s'>&quot;AL&quot;</span><span class='p'>,</span> <span class='s'>&quot;AK&quot;</span><span class='p'>,</span> <span class='s'>&quot;AZ&quot;</span><span class='p'>,</span> <span class='s'>&quot;AR&quot;</span><span class='p'>,</span> <span class='s'>&quot;CA&quot;</span><span class='p'>,</span> <span class='s'>&quot;CO&quot;</span><span class='p'>,</span> <span class='s'>&quot;CT&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;DE&quot;</span><span class='p'>,</span> <span class='s'>&quot;DC&quot;</span><span class='p'>,</span> <span class='s'>&quot;FL&quot;</span><span class='p'>,</span> <span class='s'>&quot;GA&quot;</span><span class='p'>,</span> <span class='s'>&quot;HI&quot;</span><span class='p'>,</span> <span class='s'>&quot;ID&quot;</span><span class='p'>,</span> <span class='s'>&quot;IL&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;IN&quot;</span><span class='p'>,</span> <span class='s'>&quot;IA&quot;</span><span class='p'>,</span> <span class='s'>&quot;KS&quot;</span><span class='p'>,</span> <span class='s'>&quot;KY&quot;</span><span class='p'>,</span> <span class='s'>&quot;LA&quot;</span><span class='p'>,</span> <span class='s'>&quot;ME&quot;</span><span class='p'>,</span> <span class='s'>&quot;MD&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;MA&quot;</span><span class='p'>,</span> <span class='s'>&quot;MI&quot;</span><span class='p'>,</span> <span class='s'>&quot;MN&quot;</span><span class='p'>,</span> <span class='s'>&quot;MS&quot;</span><span class='p'>,</span> <span class='s'>&quot;MO&quot;</span><span class='p'>,</span> <span class='s'>&quot;MT&quot;</span><span class='p'>,</span> <span class='s'>&quot;NE&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;NV&quot;</span><span class='p'>,</span> <span class='s'>&quot;NH&quot;</span><span class='p'>,</span> <span class='s'>&quot;NJ&quot;</span><span class='p'>,</span> <span class='s'>&quot;NM&quot;</span><span class='p'>,</span> <span class='s'>&quot;NY&quot;</span><span class='p'>,</span> <span class='s'>&quot;NC&quot;</span><span class='p'>,</span> <span class='s'>&quot;ND&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;OH&quot;</span><span class='p'>,</span> <span class='s'>&quot;OK&quot;</span><span class='p'>,</span> <span class='s'>&quot;OR&quot;</span><span class='p'>,</span> <span class='s'>&quot;PA&quot;</span><span class='p'>,</span> <span class='s'>&quot;RI&quot;</span><span class='p'>,</span> <span class='s'>&quot;SC&quot;</span><span class='p'>,</span> <span class='s'>&quot;SD&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;TN&quot;</span><span class='p'>,</span> <span class='s'>&quot;TX&quot;</span><span class='p'>,</span> <span class='s'>&quot;UT&quot;</span><span class='p'>,</span> <span class='s'>&quot;VT&quot;</span><span class='p'>,</span> <span class='s'>&quot;VA&quot;</span><span class='p'>,</span> <span class='s'>&quot;WA&quot;</span><span class='p'>,</span> <span class='s'>&quot;WV&quot;</span><span class='p'>,</span>
                                  <span class='s'>&quot;WI&quot;</span><span class='p'>,</span> <span class='s'>&quot;WY&quot;</span><span class='p'>),</span> <span class='p'>]</span><span class='o'>$</span>state
<span class='c1'># Get the frequency of reports in each state and save as a new data frame</span>
ufo_state <span class='o'>&lt;-</span> as.data.frame<span class='p'>(</span>table<span class='p'>(</span>ufo_state<span class='p'>))</span>
<span class='c1'># Change the name of the first variable to Abbreviation</span>
names<span class='p'>(</span>ufo_state<span class='p'>)</span> <span class='o'>&lt;-</span> c<span class='p'>(</span><span class='s'>&quot;Abbreviation&quot;</span><span class='p'>,</span> <span class='s'>&quot;freq&quot;</span><span class='p'>)</span>
<span class='c1'># Expand the state abbrevations to full names using a new data set</span>
names <span class='o'>&lt;-</span> read.csv<span class='p'>(</span><span class='s'>&quot;states.csv&quot;</span><span class='p'>)</span>
ufo_state <span class='o'>&lt;-</span> join<span class='p'>(</span>ufo_state<span class='p'>,</span> names<span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;left&quot;</span><span class='p'>)</span>
<span class='c1'># Remove Abbreviation</span>
ufo_state <span class='o'>&lt;-</span> ufo_state<span class='p'>[</span> <span class='p'>,</span> <span class='m'>-1</span><span class='p'>]</span>
 
<span class='c1'># Normalize number of reports in each state by population</span>
<span class='c1'># 1. Load in census data </span>
<span class='c1'># We have info for 2011, 2012, and 2000</span>
census <span class='o'>&lt;-</span> read.csv<span class='p'>(</span><span class='s'>&quot;census.csv&quot;</span><span class='p'>,</span> header <span class='o'>=</span> <span class='kc'>TRUE</span><span class='p'>,</span> stringsAsFactors <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
<span class='c1'># Fix names of census data for our variables</span>
names<span class='p'>(</span>census<span class='p'>)</span> <span class='o'>&lt;-</span> c<span class='p'>(</span><span class='s'>&quot;state&quot;</span><span class='p'>,</span> <span class='s'>&quot;x2011&quot;</span><span class='p'>,</span> <span class='s'>&quot;x2012&quot;</span><span class='p'>,</span> <span class='s'>&quot;x2000&quot;</span><span class='p'>)</span>
<span class='c1'># 2. Create population dataframe by averaging 2011 and 2000 pop. This is OKay</span>
<span class='c1'>#    because we are trying to approximate pop between 2000-2010</span>
pop <span class='o'>&lt;-</span> data.frame<span class='p'>(</span>cbind<span class='p'>(</span>census<span class='p'>[,</span> <span class='m'>1</span><span class='p'>],</span> <span class='kc'>NA</span><span class='p'>))</span>
pop<span class='p'>[</span> <span class='p'>,</span> <span class='m'>2</span><span class='p'>]</span> <span class='o'>&lt;-</span> summarise<span class='p'>(</span>census<span class='p'>,</span> pop <span class='o'>=</span> <span class='p'>(</span>x2011 <span class='o'>+</span> x2000<span class='p'>)</span> <span class='o'>/</span> <span class='m'>2</span><span class='p'>)</span>
<span class='c1'># Change the names of the varaibles of our new df</span>
names<span class='p'>(</span>pop<span class='p'>)</span> <span class='o'>&lt;-</span> c<span class='p'>(</span><span class='s'>&quot;State&quot;</span><span class='p'>,</span> <span class='s'>&quot;population&quot;</span><span class='p'>)</span>
 
<span class='c1'># Join our ufo_state and and pop data sets</span>
ufo <span class='o'>&lt;-</span> join<span class='p'>(</span>ufo_state<span class='p'>,</span> pop<span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;left&quot;</span><span class='p'>)</span>
<span class='c1'># Manually add in DC census data </span>
ufo<span class='p'>[</span>ufo<span class='o'>$</span>State <span class='o'>==</span> <span class='s'>&quot;District of Columbia&quot;</span><span class='p'>,</span> <span class='m'>3</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>617996</span>
<span class='c1'># Divide freq by population for nomilzation</span>
ufo <span class='o'>&lt;-</span> mutate<span class='p'>(</span>ufo<span class='p'>,</span> norm.freq <span class='o'>=</span> freq <span class='o'>/</span> population<span class='p'>)</span>
<span class='c1'># Convert state names to lower-case for joining later</span>
ufo<span class='o'>$</span>State <span class='o'>&lt;-</span> tolower<span class='p'>(</span>ufo<span class='o'>$</span>State<span class='p'>)</span>
ufo<span class='o'>$</span>region <span class='o'>&lt;-</span> ufo<span class='o'>$</span>State
 
<span class='c1'># Get our map data of the continental usa</span>
usa <span class='o'>&lt;-</span> map_data<span class='p'>(</span><span class='s'>&quot;state&quot;</span><span class='p'>)</span>
<span class='c1'># Combine our ufo data with our map data</span>
usa.ufo <span class='o'>&lt;-</span> join<span class='p'>(</span>ufo<span class='p'>,</span> usa<span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;right&quot;</span><span class='p'>)</span>
 
<span class='c1'># Create our plot!</span>
ggplot<span class='p'>(</span>aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>,</span> group <span class='o'>=</span> group<span class='p'>),</span> data <span class='o'>=</span> usa.ufo<span class='p'>)</span> <span class='o'>+</span>
  geom_polygon<span class='p'>(</span>aes<span class='p'>(</span>fill <span class='o'>=</span> norm.freq<span class='p'>))</span> <span class='o'>+</span> geom_path<span class='p'>()</span> <span class='o'>+</span>
  theme_bw<span class='p'>()</span> <span class='o'>+</span> scale_x_continuous<span class='p'>(</span><span class='s'>&quot;&quot;</span><span class='p'>)</span> <span class='o'>+</span> scale_y_continuous<span class='p'>(</span><span class='s'>&quot;&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  ggtitle<span class='p'>(</span><span class='s'>&quot;Normalized Distribution of UFO Reports Across Continental U.S.</span>
<span class='s'>  Between 2000 to 2010&quot;</span><span class='p'>)</span> <span class='o'>+</span> theme<span class='p'>(</span>plot.title <span class='o'>=</span> element_text<span class='p'>(</span>lineheight <span class='o'>=</span> <span class='m'>0.8</span><span class='p'>,</span>
  face <span class='o'>=</span> <span class='s'>&quot;bold&quot;</span><span class='p'>))</span> <span class='o'>+</span> labs<span class='p'>(</span>fill <span class='o'>=</span> <span class='s'>&quot;Normalized Frequency of UFO Reports&quot;</span><span class='p'>)</span> <span class='o'>+</span>
  opts<span class='p'>(</span>legend.position <span class='o'>=</span> <span class='s'>&quot;bottom&quot;</span><span class='p'>)</span> <span class='o'>+</span> 
  scale_fill_gradient<span class='p'>(</span>low <span class='o'>=</span> <span class='s'>&quot;#EEEEEE&quot;</span><span class='p'>,</span> high <span class='o'>=</span> <span class='s'>&quot;#31A354&quot;</span><span class='p'>)</span>
</code></pre></div></div>

	</article>



	<article class="post">

		
			<h1><a href="/2013/01/10/kaggle-excel-in-r/">Kaggle: Getting Started with Excel -- In R</a></h1>
		

		<div class="post-content"><p>If you&#8217;re reading this blog post then you almost certainly know about Kaggle, a very-cool resource in the data science world that works both as a platform for competition and for knowledge. The focus of the site is machine learning, something that is rather new to me. Being the awesome people that they are, Kaggle has put together a short series of guides for getting started, the <a href='http://www.kaggle.com/c/titanic-gettingStarted/details/getting-started-with-excel'>first of which</a> involves using Excel. But Excel is kinda boring, so I thought it would be fun to run through the guide using R and ggplot2 visualizations.</p>

<p>Hopefully if you&#8217;re just learning R you will be able to gain some useful insights from walking through these basics procedures.</p>

<p>The competition that we&#8217;re going to work on is <a href='http://www.kaggle.com/c/titanic-gettingStarted'>Titanic: Machine Learning from Disaster</a>. The data set for this competition is intentionally small, so there are no worries about hardware limitations here, and, unfortunately, the only prize for winning this competition is knowledge (not too bad, in my opinion). Using real data from the sinking of the Titanic, we want to create a model that can predict whether a passenger would survive or not based on information regarding variables such as their sex, ticket class, and age. Pretty cool huh? Let&#8217;s get started!</p>

<h3 id='getting_the_data'>Getting the data</h3>

<p>Obviously, the first thing we have to do to is load up the <a href='http://www.kaggle.com/c/titanic-gettingStarted/data'>data</a> into R. Download the <em>train</em> and <em>test</em> csv (comma separated value) files and load them up in R using the super easy <em>read.csv</em> function:</p>
<div class='highlight'><pre><code class='r'>train <span class='o'>&lt;-</span> read.csv<span class='p'>(</span><span class='s'>&quot;train.csv&quot;</span><span class='p'>,</span> stringsAsFactors <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span> 
test <span class='o'>&lt;-</span> read.csv<span class='p'>(</span><span class='s'>&quot;test.csv&quot;</span><span class='p'>,</span> stringsAsFactors <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
</code></pre></div>
<p>Notice that I set the default option for <em>stringsAsFactors</em> as <em>False</em>. While this isn&#8217;t necessary&#8211;especially for our application here&#8211;it really makes a lot more sense to think about strings as strings rather than factors, especially for things like names. Of course, if we need to convert our strings to factors later we can easily do so using the <em>factor</em> function.</p>

<p>The names <em>train</em> and <em>test</em> are pretty standard in machine learning, and it makes sense why: we use the <em>train</em> data set to literally train our model, i.e. the data set contains things about the passengers and whether they survived, whereas the <em>test</em> data set only contains things about the passengers and we use our model to determine whether they survived. We are then graded on the accuracy of our predictions by uploading the <em>test</em> csv file to Kaggle. In real-world applications, often the &#8220;test&#8221; data set is created by removing a random sample from the original.</p>

<h3 id='finding_patterns_in_the_data'>Finding patterns in the data</h3>

<p>So we have the data loaded into R, now what? This is most difficult (and often most unappreciated) aspect of any data analysis: finding the trends and patterns in the data. Luckily, the Getting Started guide walks us through a few intuitions, so no cleverness necessary just yet. Specifically, we are going to take a look at Sex, Age, Passenger Class, and Ticket Fare and look for relationships between these variables and survivability. The R code used to explore each of these variables will be posted in each section.</p>

<h3 id='sex'>Sex</h3>

<p>Does one&#8217;s gender tell us anything about their likelihood of surviving? This seems intuitive, so let&#8217;s ask the data. Using <em>ggplot2</em> we can quickly look at a bar-graph illustrating who survived based on sex. <img alt='excel-sex' src='/images/excel-sex.png' /> Notice that if a passenger is female they are much more likely to survive than if they are a male. Using simple algebra in R, we can see that females have about a 74% survival rate while males have about a 19% survival rate.</p>

<p>So let&#8217;s create a very simple model: we will predict that if a passenger is female, then they will survive and if a passenger is male, then they will not survive. In order to make our prediction, we have to first enter in our survived values into the test data frame and then save it to a new csv file. The test csv file is then uploaded directly Kaggle as a submission of our model. All of this is easy in R.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Look at proportion of survival by sex</span>
qplot<span class='p'>(</span>factor<span class='p'>(</span>survived<span class='p'>),</span> data <span class='o'>=</span> train<span class='p'>,</span> fill <span class='o'>=</span> sex<span class='p'>)</span> <span class='o'>+</span> facet_wrap<span class='p'>(</span><span class='o'>~</span> sex<span class='p'>)</span>
male <span class='o'>&lt;-</span> train<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;male&quot;</span>
female <span class='o'>&lt;-</span> train<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;female&quot;</span>
lived <span class='o'>&lt;-</span> train<span class='o'>$</span>survived <span class='o'>==</span> <span class='s'>&quot;1&quot;</span>
<span class='p'>(</span>length<span class='p'>(</span>train<span class='p'>[</span>male <span class='o'>&amp;</span> lived<span class='p'>,</span> <span class='m'>1</span><span class='p'>])</span> <span class='o'>/</span> length<span class='p'>(</span>train<span class='p'>[</span>male<span class='p'>,</span> <span class='m'>1</span><span class='p'>]))</span> <span class='o'>*</span> <span class='m'>100</span>
<span class='p'>(</span>length<span class='p'>(</span>train<span class='p'>[</span>female <span class='o'>&amp;</span> lived<span class='p'>,</span> <span class='m'>1</span><span class='p'>])</span> <span class='o'>/</span> length<span class='p'>(</span>train<span class='p'>[</span>female<span class='p'>,</span> <span class='m'>1</span><span class='p'>]))</span> <span class='o'>*</span> <span class='m'>100</span>
 
<span class='c1'># prop male survived: 19%; prop female survived: 74%</span>
<span class='c1'># We will say that all women are going to live; all men are going to die</span>
 
<span class='c1'># Make the first gender-based prediction</span>
test<span class='o'>$</span>survived<span class='p'>[</span>test<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;female&quot;</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>1</span>
test<span class='o'>$</span>survived<span class='p'>[</span>test<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;male&quot;</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>0</span>
write.csv<span class='p'>(</span>test<span class='p'>,</span> <span class='s'>&quot;genderbasedmodel.csv&quot;</span><span class='p'>)</span>
</code></pre></div>
<h3 id='age'>Age</h3>

<p>So we recognize that gender plays an important role in predicting survivability, but what about age? To make things easier, let&#8217;s divide age into two groups: adult (age &gt;18) and child (age &lt;=18). Once again, this seems to match our intuitions on who might survive, but let&#8217;s check it out using the same style bar-graph. <img alt='excel-age' src='/images/excel-age.png' /> Notice that I also kept the sex variable represented as color. We can see that children were more likely to survive than adults. Just as interestingly, we see the same gender patter where females are more likely to survive than males. Through calculation we can see that about 78% of female adults survived while only about 18% of male adults survived. The Getting Started Guide argues that this indicates that the age variable isn&#8217;t telling us much more additional information than the sex variable, so we ignore it for now. The proportion calculation in the R code is a little tricky to understand, but basically we have to ensure that we do not include NA&#8217;s (which there are quite a few of) in our percentage.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Improve the prediction by considering Age</span>
adult <span class='o'>&lt;-</span> train<span class='o'>$</span>age <span class='o'>&gt;</span> <span class='m'>18</span>
child <span class='o'>&lt;-</span> train<span class='o'>$</span>age <span class='o'>&lt;=</span> <span class='m'>18</span>
train<span class='o'>$</span>age.bin<span class='p'>[</span>adult<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;adult&quot;</span>
train<span class='o'>$</span>age.bin<span class='p'>[</span>child<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;child&quot;</span>
train<span class='o'>$</span>age.bin<span class='p'>[</span><span class='o'>!</span>adult <span class='o'>&amp;</span> <span class='o'>!</span>child<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='kc'>NA</span>
qplot<span class='p'>(</span>factor<span class='p'>(</span>survived<span class='p'>),</span> data <span class='o'>=</span> train<span class='p'>,</span> fill <span class='o'>=</span> sex<span class='p'>)</span> <span class='o'>+</span> facet_wrap<span class='p'>(</span><span class='o'>~</span> age.bin<span class='p'>)</span>
length<span class='p'>(</span>train<span class='p'>[</span>adult <span class='o'>&amp;</span> male <span class='o'>&amp;</span> lived <span class='o'>&amp;</span> <span class='o'>!</span>is.na<span class='p'>(</span>train<span class='o'>$</span>age<span class='p'>),</span> <span class='m'>1</span><span class='p'>])</span> <span class='o'>/</span> 
  length<span class='p'>(</span>train<span class='p'>[</span>adult <span class='o'>&amp;</span> male <span class='o'>&amp;</span> <span class='o'>!</span>is.na<span class='p'>(</span>train<span class='o'>$</span>age<span class='p'>),</span> <span class='m'>1</span><span class='p'>])</span>
length<span class='p'>(</span>train<span class='p'>[</span>adult <span class='o'>&amp;</span> female <span class='o'>&amp;</span> lived <span class='o'>&amp;</span> <span class='o'>!</span>is.na<span class='p'>(</span>train<span class='o'>$</span>age<span class='p'>),</span> <span class='m'>1</span><span class='p'>])</span> <span class='o'>/</span>
  length<span class='p'>(</span>train<span class='p'>[</span>adult <span class='o'>&amp;</span> female <span class='o'>&amp;</span> <span class='o'>!</span>is.na<span class='p'>(</span>train<span class='o'>$</span>age<span class='p'>),</span> <span class='m'>1</span><span class='p'>])</span>
<span class='c1'># Age doesn&#39;t give much additional information (than sex) regarding survivability</span>
</code></pre></div>
<h3 id='passenger_class_and_ticket_fare'>Passenger Class and Ticket Fare</h3>

<p>What can Passenger Class and Ticket Fare tell us about survivability, and what&#8217;s the relationship between the two? To make things easier, we can bin the ticket fares from less than $10, between $10 and $20, between $20 and $30, and greater than $30. Let&#8217;s make the same bar graph again, this time representing fare with color. <img alt='excel_pclass' src='/images/excel-pclass.png' /> There are two immediate, interesting findings in this graphic. The first is that, as we would expect, survivability decreases as class increases. But we can also see that some passengers paid very different prices for the same class, even to extent that some passengers paid more for a third class ticket than others paid for a first class ticket. If we look at just the ticket fares we find a similar story, namely that the more a passenger paid for a ticket, the more likely they were to survive.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Improve the prediction by considering Passenger Class &amp; Fare</span>
<span class='c1'># Consider Fare price by bining from &lt;10, 10-20, 20-30, &gt;30</span>
bin.1 <span class='o'>&lt;-</span> train<span class='o'>$</span>fare <span class='o'>&lt;</span> <span class='m'>10</span>
bin.2 <span class='o'>&lt;-</span> <span class='m'>10</span> <span class='o'>&lt;=</span> train<span class='o'>$</span>fare <span class='o'>&amp;</span> train<span class='o'>$</span>fare <span class='o'>&lt;</span> <span class='m'>20</span>
bin.3 <span class='o'>&lt;-</span> <span class='m'>20</span> <span class='o'>&lt;=</span> train<span class='o'>$</span>fare <span class='o'>&amp;</span> train<span class='o'>$</span>fare <span class='o'>&lt;=</span> <span class='m'>30</span>
bin.4 <span class='o'>&lt;-</span> <span class='m'>30</span> <span class='o'>&lt;</span> train<span class='o'>$</span>fare
train<span class='o'>$</span>fare.bin<span class='p'>[</span>bin.1<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;&lt;10&quot;</span>
train<span class='o'>$</span>fare.bin<span class='p'>[</span>bin.2<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;10-20&quot;</span>
train<span class='o'>$</span>fare.bin<span class='p'>[</span>bin.3<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;20-30&quot;</span>
train<span class='o'>$</span>fare.bin<span class='p'>[</span>bin.4<span class='p'>]</span> <span class='o'>&lt;-</span> <span class='s'>&quot;&gt;30&quot;</span>
train<span class='o'>$</span>fare.bin <span class='o'>&lt;-</span> factor<span class='p'>(</span>train<span class='o'>$</span>fare.bin<span class='p'>,</span> levels <span class='o'>=</span> c<span class='p'>(</span><span class='s'>&quot;&lt;10&quot;</span><span class='p'>,</span> <span class='s'>&quot;10-20&quot;</span><span class='p'>,</span> <span class='s'>&quot;20-30&quot;</span><span class='p'>,</span> <span class='s'>&quot;&gt;30&quot;</span><span class='p'>))</span>
qplot<span class='p'>(</span>factor<span class='p'>(</span>survived<span class='p'>),</span> data <span class='o'>=</span> train<span class='p'>,</span> fill <span class='o'>=</span> fare.bin<span class='p'>)</span> <span class='o'>+</span> facet_wrap<span class='p'>(</span><span class='o'>~</span> pclass<span class='p'>)</span>
</code></pre></div>
<h3 id='final_submission'>Final Submission</h3>

<p>With this new information we want to make one final submission. The Kaggle getting started tutorial utilizes pivot tables in Excel, so the form of our predictions is proportions. We say that any cohort of passengers that have a proportion of .5 or greater will survive, and that any cohort with a proportion less than .5 will not survive. This means that we still predict all males to not survive, but also that all women in third class who paid over $20 for their ticket will not survive. Here is a final graphic demonstrating this peculiar trend and the relevant implementation of our prediction in R: <img alt='excel-female3rd' src='/images/excel-female3rd.png' /></p>
<div class='highlight'><pre><code class='r'><span class='c1'># Make the improved genderclass-based prediction</span>
third <span class='o'>&lt;-</span> subset<span class='p'>(</span>train<span class='p'>,</span> pclass <span class='o'>==</span> <span class='s'>&quot;3&quot;</span><span class='p'>)</span>
qplot<span class='p'>(</span>factor<span class='p'>(</span>survived<span class='p'>),</span> data <span class='o'>=</span> third<span class='p'>,</span> fill <span class='o'>=</span> sex<span class='p'>)</span> <span class='o'>+</span> facet_wrap<span class='p'>(</span><span class='o'>~</span> fare.bin<span class='p'>)</span>
test<span class='o'>$</span>survived<span class='p'>[</span>test<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;male&quot;</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>0</span>
test<span class='o'>$</span>survived<span class='p'>[</span>test<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;female&quot;</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>1</span>
test<span class='o'>$</span>survived<span class='p'>[</span>test<span class='o'>$</span>sex <span class='o'>==</span> <span class='s'>&quot;female&quot;</span> <span class='o'>&amp;</span> test<span class='o'>$</span>pclass <span class='o'>==</span> <span class='s'>&quot;3&quot;</span> <span class='o'>&amp;</span> test<span class='o'>$</span>fare <span class='o'>&gt;=</span> <span class='s'>&quot;20&quot;</span><span class='p'>]</span> <span class='o'>&lt;-</span> <span class='m'>0</span>
write.csv<span class='p'>(</span>test<span class='p'>,</span> <span class='s'>&quot;genderbased-classmodel.csv&quot;</span><span class='p'>)</span>
</code></pre></div>
<h3 id='looking_forward'>Looking Forward</h3>

<p>Now we&#8217;ve submitted two models, the second of which improves slightly on the first. But I can&#8217;t help but wonder why women in third class who paid more for their ticket had a significantly lower probability of survival compared to women as a whole&#8211;an observation that contradicts our intuitions. A possible explanation for this phenomenon is simply low sample size and coincidence, an issue demonstrated in our last plot. On the other hand, there could be a more underlying trend in the data that is responsible for this event that could possibly be sniffed out using exploratory data analysis. Perhaps this will constitute a future blog post? Regardless, we can imagine that information on the causation of this trend could be used to increase the predictive power of our model.</p>

<p>From this exercise, I think it&#8217;s clear that we want to develop a classifier that can delve deeper into the data than just aggregate proportions. While I don&#8217;t have an exact idea of how I will tackle this competition as of yet, I&#8217;ll continue to update with important findings as I come across them. Good luck to all those competing, and may the best model win.</p></div>

	</article>



	<article class="post">

		
			<h1><a href="/2013/01/01/basic-fern/">Basic Python: Creating a Fern</a></h1>
		

		<div class="post-content"><p>In this short post I&#8217;m going to demonstrate how to use <strong>Scipy</strong> and <strong>matplotlib</strong> to make a basic graph of a fern. This is inspired from an introductory computational mathematics course that I&#8217;m currently taking in which we did the same task using <strong>MATLAB</strong>. Personally, I find <strong>MATLAB</strong> to be less satisfying than <strong>Python</strong>, so I thought it pleasant to make a quick translation.</p>

<p>The basic idea is to plot a few thousand points by generated by a few basic transformations. Each transformation is created using a given probability. Pretty basic, but an interesting exercise none-the-less. One nice thing about using <strong>Numpy</strong> is that it has built-in <strong>MATLAB</strong> matrix notation using <em>mat</em> rather than forcing us to use the default <em>array</em>. As always, code can be found at the end of the post.</p>

<h3 id='python_fern'>Python Fern</h3>

<p><img alt='python fern' src='/images/python_small.png' /></p>
<div class='highlight'><pre><code class='python'><span class='kn'>from</span> <span class='nn'>scipy</span> <span class='kn'>import</span> <span class='o'>*</span>
<span class='kn'>import</span> <span class='nn'>matplotlib.pyplot</span> <span class='kn'>as</span> <span class='nn'>plt</span>

<span class='n'>z</span> <span class='o'>=</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0; 0&quot;</span><span class='p'>)</span>
<span class='k'>for</span> <span class='n'>j</span> <span class='ow'>in</span> <span class='nb'>xrange</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>8000</span><span class='p'>):</span>
    <span class='n'>r</span> <span class='o'>=</span> <span class='n'>random</span><span class='o'>.</span><span class='n'>random</span><span class='p'>()</span>
    <span class='k'>if</span> <span class='n'>r</span> <span class='o'>&lt;</span> <span class='mf'>0.01</span><span class='p'>:</span>
        <span class='n'>z</span> <span class='o'>=</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0 0; 0 0.16&quot;</span><span class='p'>)</span><span class='o'>*</span><span class='n'>z</span>
    <span class='k'>elif</span> <span class='mf'>0.01</span> <span class='o'>&lt;=</span> <span class='n'>r</span> <span class='ow'>and</span> <span class='n'>r</span> <span class='o'>&lt;</span> <span class='mf'>0.86</span><span class='p'>:</span>
        <span class='n'>z</span> <span class='o'>=</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0.85 0.04; -0.04 0.85&quot;</span><span class='p'>)</span><span class='o'>*</span><span class='n'>z</span> <span class='o'>+</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0; 1.6&quot;</span><span class='p'>)</span>
    <span class='k'>elif</span> <span class='mf'>0.86</span> <span class='o'>&lt;=</span> <span class='n'>r</span> <span class='ow'>and</span> <span class='n'>r</span> <span class='o'>&lt;</span> <span class='mf'>0.93</span><span class='p'>:</span>
        <span class='n'>z</span> <span class='o'>=</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0.2 -0.26; 0.23 0.22&quot;</span><span class='p'>)</span><span class='o'>*</span><span class='n'>z</span> <span class='o'>+</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0; 1.6&quot;</span><span class='p'>)</span>
    <span class='k'>else</span><span class='p'>:</span>
        <span class='n'>z</span> <span class='o'>=</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;-0.15 0.28; 0.26 0.24&quot;</span><span class='p'>)</span><span class='o'>*</span><span class='n'>z</span> <span class='o'>+</span> <span class='n'>mat</span><span class='p'>(</span><span class='s'>&quot;0; 0.44&quot;</span><span class='p'>)</span>
    <span class='n'>plt</span><span class='o'>.</span><span class='n'>plot</span><span class='p'>(</span><span class='n'>z</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>],</span> <span class='n'>z</span><span class='p'>[</span><span class='mi'>1</span><span class='p'>],</span> <span class='s'>&#39;r.&#39;</span><span class='p'>,</span> <span class='n'>markersize</span><span class='o'>=</span><span class='mi'>1</span><span class='p'>)</span>
    <span class='n'>plt</span><span class='o'>.</span><span class='n'>hold</span><span class='p'>(</span><span class='bp'>True</span><span class='p'>)</span> 
<span class='n'>plt</span><span class='o'>.</span><span class='n'>axis</span><span class='p'>(</span><span class='s'>&#39;off&#39;</span><span class='p'>)</span>
<span class='n'>plt</span><span class='o'>.</span><span class='n'>show</span><span class='p'>()</span>
</code></pre></div></div>

	</article>






    </div>



  </div>



  <footer id="footer">
    <p class="copyright">Copyright &copy; 2013 <a href="mailto:matt.delhey@rice.edu">matt.delhey@rice.edu</a>. Powered by <a href="http://jekyllrb.com">Jekyll</a>.</p>
  </footer>



  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  <script src="/assets/js/jquery.mobilemenu.min.js"></script>

  <script>
    $(document).ready(function(){
      $('#sidebar nav ul').mobileMenu({'topOptionText': 'Menu', 'prependTo': '#sidebar nav'});
    });
  </script>



</body>
</html>
